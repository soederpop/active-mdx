<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/61c34c770a7cdebe.css" as="style"/><link rel="stylesheet" href="/_next/static/css/61c34c770a7cdebe.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-b1e5ca5aa766260c.js" defer=""></script><script src="/_next/static/chunks/framework-6e1522ff39bfc9e8.js" defer=""></script><script src="/_next/static/chunks/main-50881d1647f842ea.js" defer=""></script><script src="/_next/static/chunks/pages/_app-de456074aa047386.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...catchAll%5D-81f643499db82ec0.js" defer=""></script><script src="/_next/static/ZDd31-9Qqapi5epZeOGQx/_buildManifest.js" defer=""></script><script src="/_next/static/ZDd31-9Qqapi5epZeOGQx/_ssgManifest.js" defer=""></script><script src="/_next/static/ZDd31-9Qqapi5epZeOGQx/_middlewareManifest.js" defer=""></script></head><body><div id="__next"></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"documentId":"guides/usage/with-nextjs","extension":"mdx","model":{},"doc":{"meta":{},"ast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Using ActiveMDX with Next.js","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":31,"offset":30},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":31,"offset":30},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"You need the MDX Loader and Next.js Config","position":{"start":{"line":3,"column":4,"offset":35},"end":{"line":3,"column":46,"offset":77},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":32},"end":{"line":3,"column":46,"offset":77},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// next.config.mjs\nimport { removeFrontMatter } from \"active-mdx/src/plugins/mdx.js\"\nimport nextMdx from \"@next/mdx\"\nimport gfm from \"remark-gfm\"\n\nconst withMDX = nextMdx({\n  extension: /\\.mdx?$/,\n  options: {\n    remarkPlugins: [removeFrontMatter, gfm],\n    rehypePlugins: []\n  }\n})\n\nexport default withMDX({\n  pageExtensions: [\"js\", \"jsx\", \"md\", \"mdx\"],\n  webpack: (config, { isServer }) =\u003e {\n    // Fixes npm packages (mdx) that depend on `fs` module\n    if (!isServer) {\n      config.resolve.fallback.fs = false\n    }\n\n    return config\n  }\n})","position":{"start":{"line":5,"column":1,"offset":79},"end":{"line":30,"column":4,"offset":636},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Defining a collection and models","position":{"start":{"line":32,"column":4,"offset":641},"end":{"line":32,"column":36,"offset":673},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":638},"end":{"line":32,"column":36,"offset":673},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You should create a server module that exports the collection and specifies the root folder where the mdx content will live","position":{"start":{"line":34,"column":1,"offset":675},"end":{"line":34,"column":124,"offset":798},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":675},"end":{"line":34,"column":124,"offset":798},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// content/index.js\nimport { Collection } from \"active-mdx\"\nimport Epic from \"./models/Epic.mjs\"\nimport Story from \"./models/Story.mjs\"\nimport Index from \"./models/Index.mjs\"\n\nimport path from \"path\"\n\nconst rootPath = path.parse(import.meta.url.replace(\"file://\", \"\")).dir\n\nexport const collection = new Collection({ rootPath })\n\ncollection.model(\"Index\", Index)\ncollection.model(\"Epic\", Epic)\ncollection.model(\"Story\", Story)\n\nexport { Epic, Story, Index }\n\nexport default collection","position":{"start":{"line":36,"column":1,"offset":800},"end":{"line":56,"column":4,"offset":1294},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"A CatchAll Page which will display any document in the collection","position":{"start":{"line":58,"column":4,"offset":1299},"end":{"line":58,"column":69,"offset":1364},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":1296},"end":{"line":58,"column":69,"offset":1364},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// pages/[...catchAll].js\nimport content from \"content\"\nimport components from \"content/mdx\"\n\nexport default function CatchAllPage({ documentId, doc, model } = {}) {\n  const Component = components[documentId] || (() =\u003e \u003cdiv\u003e{documentId}\u003c/div\u003e)\n  return \u003cComponent /\u003e\n}\n\nexport async function getStaticPaths() {\n  await content.load()\n\n  const paths = content.available.map((catchAll) =\u003e ({\n    params: { catchAll: catchAll.split(\"/\") }\n  }))\n\n  return {\n    paths,\n    fallback: false\n  }\n}\n\nexport async function getStaticProps(context = {}) {\n  const { params = {} } = context\n  await content.load()\n\n  const documentId = params.catchAll.join(\"/\")\n  const doc = content.document(documentId)\n  const model = doc.toModel()\n\n  return {\n    props: {\n      documentId,\n      model: model.toJSON(),\n      doc: JSON.parse(JSON.stringify(doc.toJSON()))\n    }\n  }\n}","position":{"start":{"line":60,"column":1,"offset":1366},"end":{"line":99,"column":4,"offset":2234},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Using Next.js API Routes to work with the collection / query models /","position":{"start":{"line":101,"column":4,"offset":2239},"end":{"line":101,"column":73,"offset":2308},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":2236},"end":{"line":101,"column":73,"offset":2308},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// pages/api/active-mdx/[...catchAll].js\nimport NextAPI from \"active-mdx/src/next/api.js\"\nimport content from \"content\"\n\nexport default NextAPI(content)","position":{"start":{"line":103,"column":1,"offset":2310},"end":{"line":109,"column":4,"offset":2472},"indent":[1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":110,"column":1,"offset":2473}}},"content":"# Using ActiveMDX with Next.js\n\n## You need the MDX Loader and Next.js Config\n\n```js\n// next.config.mjs\nimport { removeFrontMatter } from \"active-mdx/src/plugins/mdx.js\"\nimport nextMdx from \"@next/mdx\"\nimport gfm from \"remark-gfm\"\n\nconst withMDX = nextMdx({\n  extension: /\\.mdx?$/,\n  options: {\n    remarkPlugins: [removeFrontMatter, gfm],\n    rehypePlugins: []\n  }\n})\n\nexport default withMDX({\n  pageExtensions: [\"js\", \"jsx\", \"md\", \"mdx\"],\n  webpack: (config, { isServer }) =\u003e {\n    // Fixes npm packages (mdx) that depend on `fs` module\n    if (!isServer) {\n      config.resolve.fallback.fs = false\n    }\n\n    return config\n  }\n})\n```\n\n## Defining a collection and models\n\nYou should create a server module that exports the collection and specifies the root folder where the mdx content will live\n\n```js\n// content/index.js\nimport { Collection } from \"active-mdx\"\nimport Epic from \"./models/Epic.mjs\"\nimport Story from \"./models/Story.mjs\"\nimport Index from \"./models/Index.mjs\"\n\nimport path from \"path\"\n\nconst rootPath = path.parse(import.meta.url.replace(\"file://\", \"\")).dir\n\nexport const collection = new Collection({ rootPath })\n\ncollection.model(\"Index\", Index)\ncollection.model(\"Epic\", Epic)\ncollection.model(\"Story\", Story)\n\nexport { Epic, Story, Index }\n\nexport default collection\n```\n\n## A CatchAll Page which will display any document in the collection\n\n```js\n// pages/[...catchAll].js\nimport content from \"content\"\nimport components from \"content/mdx\"\n\nexport default function CatchAllPage({ documentId, doc, model } = {}) {\n  const Component = components[documentId] || (() =\u003e \u003cdiv\u003e{documentId}\u003c/div\u003e)\n  return \u003cComponent /\u003e\n}\n\nexport async function getStaticPaths() {\n  await content.load()\n\n  const paths = content.available.map((catchAll) =\u003e ({\n    params: { catchAll: catchAll.split(\"/\") }\n  }))\n\n  return {\n    paths,\n    fallback: false\n  }\n}\n\nexport async function getStaticProps(context = {}) {\n  const { params = {} } = context\n  await content.load()\n\n  const documentId = params.catchAll.join(\"/\")\n  const doc = content.document(documentId)\n  const model = doc.toModel()\n\n  return {\n    props: {\n      documentId,\n      model: model.toJSON(),\n      doc: JSON.parse(JSON.stringify(doc.toJSON()))\n    }\n  }\n}\n```\n\n## Using Next.js API Routes to work with the collection / query models /\n\n```js\n// pages/api/active-mdx/[...catchAll].js\nimport NextAPI from \"active-mdx/src/next/api.js\"\nimport content from \"content\"\n\nexport default NextAPI(content)\n```\n","id":"guides/usage/with-nextjs"}},"__N_SSG":true},"page":"/[...catchAll]","query":{"catchAll":["guides","usage","with-nextjs"]},"buildId":"ZDd31-9Qqapi5epZeOGQx","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>